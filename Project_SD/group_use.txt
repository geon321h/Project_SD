-- group 실행 --
SELECT T10.GROUP_NO,GROUP_NAME,GROUP_MANAGER_NO,GROUP_CREATE_DAY,USER_COUNT
FROM GROUPSD T10
     ,(SELECT T22.GROUP_NO,COUNT(T21.USER_NO)USER_COUNT
       FROM GROUPSD_USER_LIST T21
            ,(SELECT GROUP_NO
              FROM GROUPSD_USER_LIST
              WHERE USER_NO = 1
                    and GROUP_CHECK = 'Y') T22
       WHERE T21.GROUP_NO = T22.GROUP_NO
       GROUP BY T22.GROUP_NO) T20
WHERE T10.GROUP_NO = T20.GROUP_NO
ORDER BY T10.GROUP_NO;

SELECT T10.GROUP_NO,GROUP_NAME,GROUP_MANAGER_NO,GROUP_CREATE_DAY,USER_COUNT
FROM GROUPSD T10
     ,(SELECT T22.GROUP_NO,COUNT(T21.USER_NO)USER_COUNT
       FROM GROUPSD_USER_LIST T21
            ,(SELECT GROUP_NO
              FROM GROUPSD_USER_LIST
              WHERE USER_NO = 1
              and GROUP_CHECK = 'Y') T22
       WHERE T21.GROUP_NO = T22.GROUP_NO
       AND T21.GROUP_CHECK = 'Y'
       GROUP BY T22.GROUP_NO) T20
WHERE T10.GROUP_NO = T20.GROUP_NO and T10.GROUP_MANAGER_NO = 1
ORDER BY T10.GROUP_NO;

SELECT COUNT(GROUP_NO)
FROM GROUPSD_USER_LIST
WHERE USER_NO = 1
AND GROUP_CHECK = 'Y';

SELECT GROUP_NAME, T10.GROUP_NO
FROM (SELECT GROUP_NO
      FROM GROUPSD_USER_LIST
      WHERE USER_NO = 1
      and GROUP_CHECK = 'N')T10
      , GROUPSD T20
WHERE T10.GROUP_NO = T20.GROUP_NO;

UPDATE GROUPSD_USER_LIST 
SET GROUP_CHECK = 'Y'
WHERE GROUP_NO = 6
AND USER_NO = 1;

DELETE GROUPSD_USER_LIST
WHERE  GROUP_NO = 6
AND USER_NO = 1
AND GROUP_CHECK = 'N';

SELECT * FROM GROUPSD WHERE GROUP_NO =1;


SELECT T20.FRIEND_NO
FROM (SELECT USER_NO
      FROM GROUPSD_USER_LIST
      WHERE GROUP_NO = 1 )T10
      RIGHT JOIN (SELECT (CASE WHEN 1 = USER_NO THEN FRIEND_NO ELSE USER_NO END) AS FRIEND_NO
      FROM FRIENDSD  
      WHERE (USER_NO = 1 OR FRIEND_NO = 1)
      AND FRIEND_CHECK = 'Y') T20
      ON T10.USER_NO = T20.FRIEND_NO
WHERE T10.USER_NO IS NULL;

UPDATE GROUPSD 
SET GROUP_NAME = '거니 그룹'
WHERE GROUP_NO = 1;

SELECT NAME,USER_NO
FROM  (SELECT USER_NO
       FROM GROUPSD_USER_LIST
       WHERE GROUP_NO = 2) T10
       , USERSD T20
WHERE T20.NO = T10.USER_NO
      AND NOT USER_NO = 1;
      

DELETE GROUPSD_USER_LIST
WHERE  GROUP_NO = 2
AND USER_NO = 2
AND GROUP_CHECK = 'Y';

SELECT GROUP_NO,GROUP_WRITING_NO,GROUP_WRITING_TITLE,GROUP_WRITING_CONTENT,GROUP_WRITING_DAY,GROUP_WRITING_USER_NO,T20.NAME
FROM (SELECT GROUP_NO,GROUP_WRITING_NO,GROUP_WRITING_TITLE,GROUP_WRITING_CONTENT,GROUP_WRITING_DAY,GROUP_WRITING_USER_NO
      FROM GROUPSD_WRITING_LIST 
      WHERE GROUP_NO = 1 
      AND GROUP_WRITING_NO = 2
      ORDER BY GROUP_WRITING_NO) T10
      , USERSD T20
WHERE T10.GROUP_WRITING_NO = T20.NO
;